<!DOCTYPE html>
<html>
    <head>
        <title>Rising Gates</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="./favicon.ico?v=4" /> <!-- http://stackoverflow.com/questions/2208933/how-do-i-force-a-favicon-refresh -->
        <link rel="stylesheet" type="text/css" href="localcss.css" />
        <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js'></script>
        <link rel="stylesheet" href="gh-fork-ribbon.css" />
        <script type='text/javascript' src='gates.js'></script>
        <script type='text/javascript' src='dismiss.js'></script>
    </head>
    <body>
        <div class="github-fork-ribbon-wrapper right">
            <div class="github-fork-ribbon">
                <a href="https://github.com/emrys57/gates">Fork me on GitHub</a>
            </div>
        </div>
        <div class="mainDisplay">
            <h1>Rising Gate Calculator</h1>
            <div class="lesser">
                How to hang a rising gate, neatly!
                <br />
                Calculate the offset of one hinge of a gate to make it rise on opening, yet be vertical both when closed and when open.
                <br />
                Much more information <a href="http://www.eversholt.org.uk/blog/?cat=4">here</a>.
            </div>
        </div>
        <div class="mainDisplay">
            <div data-bind="foreach: inParms">
                <div data-bind="template: 'showParm'">
                </div>
            </div>
        </div>
        <div class="mainDisplay">
            <div data-bind="foreach: outParms">
                <div data-bind="template: 'showParm'">
                </div>
            </div>
        </div>
        
        <div class="mainDisplay">
            Good Luck! Have Fun!
            <div>
                <div class="ib comment" data-bind="html: saying"></div>
                <div style="float: right">
            <input class="smallButton" style="width: 5em;" type="submit" value="More" data-bind="click: sayingButtonPressed" />
        </div>
            </div>
        </div>


        <div class="development" data-bind="if:developmentWanted">
            <div class="developmentBox" id="developmentBox" style="">
                <div style="">Development Only</div>
                <hr />
                <label class="checkboxLabel"><input type="checkbox" class="checkboxInput" data-bind="checked: showModel"> Show knockout.js model</label>
            </div>
            <div data-bind="if: showModel"><pre data-bind="text: ko.toJSON($data, null, 2)"></pre></div>
        </div>

<script type="text/html" id="showParm">
    <div>
        <div class="parmTitle"><div class="ib" data-bind="html: ko.unwrap(readable)+':'"></div> </div>
        <div class="ib" data-bind="visible: ko.unwrap(input)">  <!-- knockout inserts spurious space using just if binding -->
            <div class="ib column" data-bind="if: ko.unwrap(input)"> 
                <div class="ib columnOutput">
                <input type="text" class="columnInput" data-bind="value: $root[variableName], valueUpdate: 'afterkeydown', css: { invalid: !koValid() }"/>
                </div>
                <div class="ib" data-bind="html: unit"></div>
            </div>
        </div>
        <div class="ib" data-bind="visible: !ko.unwrap(input)">
            <div class="ib column" data-bind="if: !ko.unwrap(input)">
                <div class="ib columnOutput" data-bind="text: $root.inParmsValid()? $root.round2($root[variableName]()): ''"></div>
                <div class="ib" data-bind="html: unit"></div>
            </div>
        </div>
        <div class="ib" >
            <div class="ib comment" data-bind="html: hint"></div>
        </div>
        <div style="float: right" data-bind="if: more">
            <input class="smallButton" style="width: 5em;" type="submit" data-bind="value: showMore()? 'Less': 'More', click: moreClicked" />
        </div>
        <div data-bind="slideContent2: showMore">
            <div data-bind="html: more"></div>
        </div>
    </div>
</script>
    </body>
</html>
